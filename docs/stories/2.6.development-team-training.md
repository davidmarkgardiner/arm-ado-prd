# Story 2.6: Development Team GitOps Training

<!-- Powered by BMAD™ Core -->

## Status
Draft

## Story
**As a** Training Coordinator,
**I want** to train development teams on the new GitOps workflow,
**So that** teams can effectively use the new infrastructure.

## Acceptance Criteria
1. Training materials created and reviewed
2. Hands-on training sessions conducted
3. GitOps workflow documentation available
4. Team feedback collected and addressed
5. Self-service capabilities validated

## Tasks / Subtasks
- [ ] Create comprehensive training materials (AC: 1)
  - [ ] Develop GitOps workflow training presentations
  - [ ] Create hands-on lab exercises and scenarios
  - [ ] Develop troubleshooting guides and FAQs
  - [ ] Create video tutorials for common workflows
  - [ ] Review materials with platform engineering team
- [ ] Conduct hands-on GitOps training sessions (AC: 2)
  - [ ] Schedule training sessions with all development teams
  - [ ] Deliver comprehensive GitOps overview sessions
  - [ ] Conduct hands-on laboratory exercises
  - [ ] Provide real-world scenario walkthroughs
  - [ ] Offer one-on-one coaching sessions for complex cases
- [ ] Create self-service documentation (AC: 3)
  - [ ] Document complete GitOps workflow procedures
  - [ ] Create step-by-step guides for common tasks
  - [ ] Develop troubleshooting and error resolution guides
  - [ ] Create architectural decision records (ADRs)
  - [ ] Establish documentation maintenance procedures
- [ ] Establish feedback collection mechanism (AC: 4)
  - [ ] Create feedback forms and survey instruments
  - [ ] Conduct post-training feedback sessions
  - [ ] Set up ongoing feedback collection channels
  - [ ] Implement feedback analysis and response procedures
  - [ ] Track training effectiveness metrics
- [ ] Create troubleshooting guides (AC: 3, 5)
  - [ ] Document common issues and resolutions
  - [ ] Create diagnostic procedures and tools
  - [ ] Develop escalation procedures and contacts
  - [ ] Create self-diagnostic checklists
  - [ ] Establish community support mechanisms
- [ ] Setup office hours for ongoing support (AC: 4, 5)
  - [ ] Schedule regular office hours for GitOps support
  - [ ] Create support request tracking system
  - [ ] Establish expertise sharing sessions
  - [ ] Create mentorship pairing programs
  - [ ] Set up community of practice forums

## Dev Notes

### Previous Story Dependencies
This story builds on:
- Story 2.5 (Environment Optimization): Environment must be optimized and stable
- All previous Epic 2 stories: Complete development environment must be operational

### Training Curriculum Design
**GitOps Training Modules**:
```yaml
training_curriculum:
  module_1_fundamentals:
    title: "GitOps Principles and Architecture"
    duration: "2 hours"
    content:
      - "GitOps philosophy and benefits"
      - "Infrastructure as Code with ASO"
      - "Flux v2 architecture and components"
      - "Git-based workflow patterns"

  module_2_hands_on_basics:
    title: "Basic GitOps Operations"
    duration: "3 hours"
    content:
      - "Repository structure and organization"
      - "Creating and modifying infrastructure manifests"
      - "Variable substitution and environment management"
      - "Git workflow and pull request process"

  module_3_advanced_workflows:
    title: "Advanced GitOps Patterns"
    duration: "2 hours"
    content:
      - "Multi-environment deployments"
      - "Rollback and disaster recovery procedures"
      - "Monitoring and observability"
      - "Troubleshooting common issues"

  module_4_self_service:
    title: "Self-Service Infrastructure"
    duration: "1.5 hours"
    content:
      - "Self-service resource provisioning"
      - "Resource quotas and limits"
      - "Cost optimization strategies"
      - "Security best practices"
```

### Hands-On Laboratory Exercises
**Lab Exercise 1: Basic Resource Provisioning**:
```yaml
# Lab 1: Create a development database
apiVersion: resources.azure.com/v1api20200601
kind: ResourceGroup
metadata:
  name: lab-database-rg-${TEAM_NAME}
  annotations:
    serviceoperator.azure.com/subscription-id: ${DEV_SUBSCRIPTION_ID}
spec:
  location: eastus
  tags:
    environment: "development"
    team: "${TEAM_NAME}"
    purpose: "training-lab"
    managed-by: "gitops"

---
# Lab exercise: Add a PostgreSQL database
# Students will add the database resource here
```

**Lab Exercise 2: Application Deployment**:
```yaml
# Lab 2: Deploy a sample application with GitOps
apiVersion: apps/v1
kind: Deployment
metadata:
  name: lab-app-${TEAM_NAME}
  namespace: development
spec:
  replicas: 1
  selector:
    matchLabels:
      app: lab-app-${TEAM_NAME}
  template:
    metadata:
      labels:
        app: lab-app-${TEAM_NAME}
    spec:
      containers:
      - name: app
        image: nginx:latest
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi

# Lab exercise: Students add service and ingress
```

### GitOps Workflow Documentation
**Complete GitOps Workflow Guide**:
```markdown
# GitOps Workflow Guide

## Overview
This guide covers the complete GitOps workflow for infrastructure and application management using Azure Service Operator and Flux.

## Basic Workflow

### 1. Repository Structure
```
infrastructure/
├── clusters/management/          # Management cluster configuration
├── environments/
│   ├── development/             # Development environment
│   │   ├── infrastructure/      # Infrastructure resources
│   │   └── applications/        # Application deployments
│   ├── staging/                 # Staging environment
│   └── production/              # Production environment
└── platform/                   # Platform components
```

### 2. Creating Infrastructure Changes

#### Step 1: Create Feature Branch
```bash
git checkout -b feature/add-database-cluster
```

#### Step 2: Modify Infrastructure Manifests
Edit the appropriate environment files:
- Add new resources
- Modify existing configurations
- Update variable substitutions

#### Step 3: Test Locally
```bash
# Validate manifests
kubectl apply --dry-run=server -f environments/development/

# Test Kustomization build
kustomize build environments/development/
```

#### Step 4: Create Pull Request
- Push branch to remote repository
- Create pull request with clear description
- Request reviews from platform team
- Address feedback and make changes

#### Step 5: Merge and Deploy
- Merge pull request after approval
- Monitor Flux reconciliation
- Validate deployed resources
- Verify application functionality

## Common Tasks

### Adding a New Application
1. Create application manifests in appropriate environment
2. Add resource definitions (Deployment, Service, Ingress)
3. Configure monitoring and logging
4. Test in development first
5. Promote to higher environments

### Modifying Infrastructure
1. Update ASO resource manifests
2. Test changes with dry-run
3. Apply changes through GitOps workflow
4. Monitor resource reconciliation
5. Validate infrastructure changes

### Rolling Back Changes
1. Identify problematic commit
2. Create revert pull request
3. Or use Git revert command
4. Monitor rollback deployment
5. Verify system stability

## Troubleshooting

### Common Issues
1. **Flux Not Syncing**
   - Check Git repository connectivity
   - Verify SSH keys and permissions
   - Check Flux controller logs

2. **ASO Resource Failures**
   - Check Azure permissions and quotas
   - Verify resource dependencies
   - Check ASO controller logs

3. **Application Deployment Issues**
   - Check resource quotas
   - Verify image availability
   - Check network policies

### Diagnostic Commands
```bash
# Check Flux status
flux get all

# Check ASO resources
kubectl get resourcegroup,managedcluster -A

# Check application status
kubectl get pods,services,ingress -n applications
```
```

### Training Delivery Methods
**Multi-Modal Training Approach**:
```yaml
delivery_methods:
  in_person_sessions:
    format: "Interactive workshops"
    duration: "4 hours per team"
    max_participants: 8
    frequency: "Weekly until all teams trained"

  virtual_sessions:
    format: "Online workshops with screen sharing"
    duration: "2 hours per session"
    tools: ["Teams", "Miro", "Live coding"]
    recording: "All sessions recorded"

  self_paced_learning:
    format: "Online modules with hands-on labs"
    platform: "Internal learning management system"
    completion_tracking: "Progress tracking enabled"

  mentorship_program:
    format: "Pair programming sessions"
    duration: "1 hour per week for 4 weeks"
    mentor_pool: "Platform engineering team"

  community_support:
    format: "Slack channels and office hours"
    channels: ["#gitops-help", "#aso-questions"]
    office_hours: "Tuesdays and Thursdays 2-4 PM"
```

### Training Assessment and Feedback
**Competency Assessment Framework**:
```yaml
assessment_criteria:
  basic_competency:
    - "Can navigate Git repository structure"
    - "Can create simple infrastructure manifests"
    - "Understands GitOps workflow principles"
    - "Can perform basic troubleshooting"

  intermediate_competency:
    - "Can design multi-resource deployments"
    - "Understands environment promotion patterns"
    - "Can troubleshoot complex issues"
    - "Can optimize resource configurations"

  advanced_competency:
    - "Can design complex GitOps workflows"
    - "Can mentor other team members"
    - "Can contribute to platform improvements"
    - "Can handle incident response"

feedback_collection:
  immediate_feedback:
    - "Post-session survey forms"
    - "Hands-on exercise completion rates"
    - "Q&A session participation"

  ongoing_feedback:
    - "Monthly team retrospectives"
    - "GitOps workflow adoption metrics"
    - "Support request analysis"
    - "Performance improvement tracking"
```

### Self-Service Capabilities
**Developer Self-Service Portal**:
```yaml
self_service_features:
  resource_provisioning:
    - "Database creation templates"
    - "Application deployment templates"
    - "Storage resource templates"
    - "Monitoring and alerting setup"

  environment_management:
    - "Environment variable management"
    - "Secret rotation procedures"
    - "Configuration updates"
    - "Resource scaling operations"

  monitoring_and_diagnostics:
    - "Application health dashboards"
    - "Resource utilization metrics"
    - "Log aggregation and search"
    - "Performance monitoring"

  automation_tools:
    - "CI/CD pipeline templates"
    - "Automated testing frameworks"
    - "Deployment validation scripts"
    - "Rollback automation"
```

### Training Success Metrics
**Training Effectiveness Measurements**:
```yaml
success_metrics:
  adoption_metrics:
    - "Percentage of teams using GitOps workflow"
    - "Number of self-service operations per week"
    - "Reduction in platform team support requests"
    - "Time to deploy new applications"

  competency_metrics:
    - "Training completion rates"
    - "Assessment scores"
    - "Hands-on exercise success rates"
    - "Peer mentoring participation"

  satisfaction_metrics:
    - "Training satisfaction scores (>4.5/5)"
    - "Workflow satisfaction ratings"
    - "Team productivity improvements"
    - "Developer experience feedback"

  business_impact:
    - "Deployment frequency increase"
    - "Time to market improvement"
    - "Incident reduction rate"
    - "Infrastructure cost optimization"
```

## Testing

### Training Effectiveness Testing
- Training content comprehensiveness validation
- Hands-on exercise completion and accuracy
- Knowledge retention assessment
- Practical skill demonstration

### Self-Service Capability Testing
- Self-service workflow functionality validation
- Documentation accuracy and completeness
- Support channel effectiveness
- Community engagement and knowledge sharing

### Long-term Impact Assessment
- GitOps workflow adoption rate measurement
- Developer productivity improvement tracking
- Support request volume and complexity analysis
- Team satisfaction and confidence levels

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-19 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*This section will be populated by the QA agent after story completion*